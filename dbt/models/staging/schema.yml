version: 2

sources:
  - name: synology_ingestion
    description: "Outputs generated by the ingestion CLI and staged as dbt seeds or external tables."
    schema: seeds
    tables:
      - name: 2023_c2
      - name: '2023'
      - name: 2024_c2
      - name: '2024'
  - name: mapping_table
    description: "Lookup tables copied from data/mapping_table for enrichment joins."
    schema: seeds
    tables:
      - name: mapped_countries_with_regions
      - name: device_to_bay

models:
  - name: stg_synology_sales
    description: "Unified sale-out history across ingestion snapshots with standardized column names."
    columns:
      - name: sale_date
        description: "Date the sale occurred (UTC)."
        tests:
          - not_null
      - name: sku
        description: "Inventory SKU identifier."
        tests:
          - not_null
      - name: channel
        description: "Sales channel label (e.g. IM, TDBS)."
      - name: quantity
        description: "Units sold in the reporting period."
        tests:
          - not_null
      - name: revenue
        description: "Total revenue for the SKU/channel/day combination."
